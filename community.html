<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="OPPOOD 커뮤니티 - 부산 직장인들의 익명 소통 공간">
    <meta name="theme-color" content="#00B4A6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>커뮤니티 - OPPOOD</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/header.css">
    <link rel="stylesheet" href="styles/community.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <main class="main">
        <div class="container">
            <!-- 공통 헤더 -->
            <div class="community-header">
                <h1>커뮤니티</h1>
            </div>

            <div class="community-wrapper">
                <!-- 사이드 메뉴 -->
                <aside class="side-menu">
                    <nav class="menu-nav">
                        <ul class="menu-list">
                            <li class="menu-item active" data-section="communication">
                                <a href="#" onclick="showSection('communication')">
                                    <i class="icon">💬</i>
                                    <span>소통</span>
                                </a>
                            </li>
                            <li class="menu-item" data-section="benefits">
                                <a href="#" onclick="showSection('benefits')">
                                    <i class="icon">🎁</i>
                                    <span>청년 혜택 정보</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </aside>

                <!-- 메인 콘텐츠 영역 -->
                <div class="main-content">
                    <!-- 소통 섹션 -->
                    <div id="communicationSection" class="content-section active">
                        
                        <!-- 피드 영역 -->
                        <div class="feed-section">
                <!-- 게시글 작성 -->
                <div class="post-composer" id="postComposer" style="display: none;">
                    <div class="composer-header">
                        <div class="author-info" id="authorInfo">
                            <div class="author-avatar">A</div>
                            <span class="author-display-name">작성자</span>
                        </div>
                        <label class="anonymous-toggle">
                            <input type="checkbox" id="anonymousCheck" onchange="toggleAnonymous()">
                            <span>익명으로 작성</span>
                        </label>
                    </div>
                    <textarea id="postContent" placeholder="무슨 생각을 하고 계신가요?" class="post-input"></textarea>
                    
                    <!-- 미디어 미리보기 영역 -->
                    <div id="mediaPreview" class="media-preview"></div>
                    
                    <!-- 작성 도구 -->
                    <div class="post-tools">
                        <div class="tools-left">
                            <button class="tool-btn" onclick="document.getElementById('imageInput').click()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                                <span>사진</span>
                            </button>
                            <input type="file" id="imageInput" accept="image/*" multiple onchange="handleImageSelect(event)" style="display: none;">
                            
                            <button class="tool-btn" onclick="showLinkDialog()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                </svg>
                                <span>링크</span>
                            </button>
                        </div>
                        <button class="btn btn-primary" onclick="createPost()">게시</button>
                    </div>
                </div>

                <!-- 로그인 안내 -->
                <div class="login-prompt" id="loginPrompt">
                    <p>로그인 후 게시글을 작성할 수 있습니다.</p>
                    <button class="btn btn-primary" onclick="location.href='login.html'">로그인</button>
                </div>

                <!-- 피드 목록 -->
                <div id="feedList" class="feed-list">
                    <!-- 게시글들이 여기에 동적으로 추가됩니다 -->
                </div>
            </div>
                    </div>

                    <!-- 청년 혜택 정보 섹션 -->
                    <div id="benefitsSection" class="content-section">
                        <div class="section-description">
                            <p>부산 청년들을 위한 다양한 혜택 정보를 공유하는 공간입니다.</p>
                        </div>
                        
                        <!-- 혜택 정보 게시판 -->
                        <div class="benefits-board">
                            <!-- 게시글 작성 -->
                            <div class="benefit-composer" id="benefitComposer" style="display: none;">
                                <div class="composer-header">
                                    <h3>혜택 정보 공유</h3>
                                </div>
                                <input type="text" id="benefitTitle" placeholder="제목을 입력하세요" class="benefit-title-input">
                                <textarea id="benefitContent" placeholder="혜택 정보를 자세히 공유해주세요" class="benefit-input"></textarea>
                                
                                <!-- 미디어 미리보기 영역 -->
                                <div id="benefitMediaPreview" class="media-preview"></div>
                                
                                <!-- 작성 도구 -->
                                <div class="post-tools">
                                    <div class="tools-left">
                                        <button class="tool-btn" onclick="document.getElementById('benefitImageInput').click()">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                                <polyline points="21 15 16 10 5 21"></polyline>
                                            </svg>
                                            <span>사진</span>
                                        </button>
                                        <input type="file" id="benefitImageInput" accept="image/*" multiple onchange="handleBenefitImageSelect(event)" style="display: none;">
                                        
                                        <button class="tool-btn" onclick="showBenefitLinkDialog()">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                            </svg>
                                            <span>링크</span>
                                        </button>
                                    </div>
                                    <button class="btn btn-primary" onclick="createBenefitPost()">게시</button>
                                </div>
                            </div>

                            <!-- 로그인 안내 -->
                            <div class="login-prompt" id="benefitLoginPrompt">
                                <p>로그인 후 혜택 정보를 공유할 수 있습니다.</p>
                                <button class="btn btn-primary" onclick="location.href='login.html'">로그인</button>
                            </div>

                            <!-- 혜택 게시글 목록 -->
                            <div id="benefitList" class="benefit-list">
                                <!-- 샘플 혜택 정보 -->
                                <div class="benefit-item">
                                    <div class="benefit-header">
                                        <h3 class="benefit-title">부산 청년 월세 지원사업</h3>
                                        <span class="benefit-date">2024.03.20</span>
                                    </div>
                                    <div class="benefit-content">
                                        <p>만 19~34세 부산 거주 청년 대상 월 최대 20만원 월세 지원</p>
                                        <p>신청기간: 2024.04.01 ~ 2024.04.30</p>
                                    </div>
                                    <div class="benefit-footer">
                                        <span class="benefit-author">익명</span>
                                        <button class="btn-text">자세히 보기</button>
                                    </div>
                                </div>
                                
                                <div class="benefit-item">
                                    <div class="benefit-header">
                                        <h3 class="benefit-title">청년 디지털 일자리 사업</h3>
                                        <span class="benefit-date">2024.03.18</span>
                                    </div>
                                    <div class="benefit-content">
                                        <p>IT 분야 청년 채용 기업 대상 인건비 지원</p>
                                        <p>지원금액: 월 최대 180만원 (최대 6개월)</p>
                                    </div>
                                    <div class="benefit-footer">
                                        <span class="benefit-author">정보공유자</span>
                                        <button class="btn-text">자세히 보기</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 댓글 모달 -->
    <div id="commentModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">댓글</h3>
                <button class="close" onclick="closeCommentModal()" aria-label="닫기">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 원본 게시글 -->
                <div id="originalPost" class="original-post">
                    <!-- 원본 게시글 내용이 여기에 표시됩니다 -->
                </div>
                
                <!-- 댓글 목록 -->
                <div id="commentList" class="comment-list">
                    <!-- 댓글들이 여기에 표시됩니다 -->
                </div>
                
                <!-- 댓글 작성 -->
                <div class="comment-composer">
                    <div class="comment-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="secretComment">
                            <span>비밀댓글</span>
                        </label>
                    </div>
                    <div class="comment-input-group">
                        <input type="text" id="commentInput" placeholder="댓글을 입력하세요..." class="comment-input">
                        <button class="btn btn-primary btn-sm" onclick="addComment()">작성</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 링크 추가 모달 -->
    <div id="linkModal" class="modal" role="dialog" aria-modal="true">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>링크 추가</h3>
                <button class="close" onclick="closeLinkDialog()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="url" id="linkInput" placeholder="https://example.com" class="link-input">
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeLinkDialog()">취소</button>
                    <button class="btn btn-primary" onclick="addLink()">추가</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 혜택 정보 링크 추가 모달 -->
    <div id="benefitLinkModal" class="modal" role="dialog" aria-modal="true">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>링크 추가</h3>
                <button class="close" onclick="closeBenefitLinkDialog()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="url" id="benefitLinkInput" placeholder="https://example.com" class="link-input">
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeBenefitLinkDialog()">취소</button>
                    <button class="btn btn-primary" onclick="addBenefitLink()">추가</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/header-loader.js"></script>
    <script src="js/community.js"></script>
</body>
</html>